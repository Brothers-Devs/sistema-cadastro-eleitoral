import{i as b,j as e,r as s,y}from"./app-CsmrsdNz.js";import{B as D}from"./Breadcrumb-ChJdce_g.js";import{r as M}from"./createSvgIcon-BuVCIJdq.js";import{D as I}from"./DefaultLayout-DCmKTh63.js";import{m as O}from"./index.esm-CxNWdyHN.js";import{HasFile as R}from"./HasFile-BQE5Vei5.js";import{FormMedia as T}from"./FormMedia-Bsvw7x1l.js";import{n as g}from"./notiflix-aio-3.2.7.min-6p8jm6Cn.js";import{P as L}from"./index-BhXNj7Il.js";import N from"./LoadingOverlay-C3T6uayT.js";import{D as P}from"./Divider-9lgMAwBx.js";import{B as F}from"./Box-Dyl8vz7d.js";import{T as W}from"./Typography-DEhwog15.js";import{F as B,A as w,T as q}from"./Autocomplete-r09YdzKQ.js";import{I as k}from"./createSvgIcon-C6zBH0Fp.js";import{G}from"./Grid-C40vAs8M.js";import"./generateUtilityClasses-Cx53VVyx.js";import"./Modal-BvxJwN2U.js";import"./styled-BSxZ5rE1.js";import"./Popper-DCyfeftU.js";import"./index-B4VtkcKW.js";import"./iconBase-IjdFd9Bi.js";import"./logo-candidato-SK3Uj6G_.js";import"./InputLabel-BPDiEdbM.js";import"./PrimaryButton-D_qLfjqS.js";import"./Tooltip-DFaQNxAP.js";import"./CircularProgress-C_EYquXq.js";import"./index-C6jzvmbU.js";var u={},V=b;Object.defineProperty(u,"__esModule",{value:!0});var j=u.default=void 0,$=V(M()),z=e;j=u.default=(0,$.default)((0,z.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");const H=["999.999.999-99"];function Ae({leaders:n}){const[r,m]=s.useState({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),[x,l]=s.useState(""),[o,h]=s.useState(null),[C,p]=s.useState(0),[i,d]=s.useState(!1),f=s.useCallback(()=>{h(null),l("")},[o]),S=()=>{m({}),l(""),f()},A=t=>{t.preventDefault(),d(!0);const c={leader_id:r==null?void 0:r.id,media_type:o.type.split("/")[0],text_message:x,media:o};y.post("/messages/send-media",c,{onProgress:a=>{if(a.lengthComputable){const E=Math.round(a.loaded/a.total*100);p(E)}},onSuccess:()=>{g.Notify.success("Mensagem enviada com sucesso!"),m({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),f(),d(!1),p(0)},onError:a=>{console.log(a),g.Notify.failure(a==null?void 0:a.media),d(!1),p(0)}})},_=n==null?void 0:n.map(t=>({...t,nameWithCpf:`${t.name} (${O(t.cpf,H)})`}));function v(t){m({...t})}return e.jsxs(I,{children:[e.jsx(D,{pageName:"Enviar Pelo Whatsapp"}),e.jsx(P,{variant:"fullWidth"}),e.jsxs("div",{className:"mt-5 h-full w-full bg-white p-8 shadow-6",children:[e.jsxs(F,{sx:{marginTop:3,width:500,display:"flex",justifyContent:"center",flexDirection:"column"},children:[e.jsx(W,{variant:"subtitle1",sx:{mb:2},children:"Selecione a Liderança*"}),e.jsxs(B,{required:!0,sx:{width:400},children:[e.jsx(w,{clearIcon:e.jsx(k,{onClick:S,children:e.jsx(j,{})}),value:r,onChange:(t,c)=>{v(c)},id:"leader",options:_,renderInput:t=>e.jsx(q,{...t}),getOptionLabel:t=>t.name?t.nameWithCpf:""}),e.jsx("p",{className:"mt-3 text-orange-600 text-xs font-semibold",children:"OBS: SELECIONE UMA LIDERANÇA PARA ENVIAR A MENSAGEM PARA TODOS OS ELEITORES CADASTRADO DESSA LIDERANÇA."})]})]}),r.name?e.jsx(G,{item:!0,xs:10,sm:8,md:6,sx:{marginTop:3,maxWidth:500,p:5,display:"flex",justifyContent:"center",flexDirection:"column",border:"2px solid #7f7f7f"},children:o?e.jsxs(e.Fragment,{children:[e.jsx(R,{file:o,removeFile:f,textMessage:x,setTextMessage:l,handleSubmit:A,leaderSelected:r,sendMessage:i}),i&&e.jsx(L,{completed:C,bgColor:"#3b82f6",height:"20px",labelColor:"#fff",labelAlignment:"center"})]}):e.jsx(T,{setFile:h})}):null]}),i&&e.jsx(N,{isVisible:i})]})}export{Ae as default};
