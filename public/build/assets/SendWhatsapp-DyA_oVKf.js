import{i as C,j as e,r,y as E}from"./app-CypXh5JM.js";import{B as T}from"./Breadcrumb-CtUCDsoJ.js";import{r as y}from"./createSvgIcon-B05p4gN2.js";import{D}from"./DefaultLayout-DqBfSIQU.js";import{m as N}from"./index.esm-CxNWdyHN.js";import{HasFile as I}from"./HasFile-CVzPCcq_.js";import{FormMedia as M}from"./FormMedia-DRySFznO.js";import{n as u}from"./notiflix-aio-3.2.7.min-R37nWhFs.js";import{D as R}from"./Divider-BvXE55bN.js";import{B as O}from"./Box-DsIIlmk_.js";import{T as b}from"./Typography-CUJlPNH8.js";import{F as L,A as F,T as W}from"./Autocomplete-DAtuj_yF.js";import{I as B}from"./createSvgIcon-5t9yY9aP.js";import{G as P}from"./Grid-DY9fzT0b.js";import"./generateUtilityClasses-B1DpmFzl.js";import"./Modal-CFopQyeW.js";import"./Popper-BZOJaGbd.js";import"./index-DgMtV1zQ.js";import"./iconBase-B7663Z85.js";import"./logo-candidato-SK3Uj6G_.js";import"./InputLabel-BZKWI0Cb.js";import"./PrimaryButton-CyuJ0MTS.js";import"./Tooltip-Bb17mPFC.js";import"./CircularProgress-B2jOin2V.js";import"./index-CJBJ1BH6.js";var f={},w=C;Object.defineProperty(f,"__esModule",{value:!0});var h=f.default=void 0,q=w(y()),k=e;h=f.default=(0,q.default)((0,k.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");const G=["999.999.999-99"];function ce({leaders:p}){const[a,n]=r.useState({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),[c,d]=r.useState(""),[s,x]=r.useState(null),[g,m]=r.useState(!1),o=r.useCallback(()=>{x(null),d("")},[s]),j=()=>{n({}),d(""),o()},A=t=>{t.preventDefault(),m(!0);const i=setTimeout(()=>{u.Notify.info("Aguarde um momento, sua mensagem está sendo enviada!")},0),v={leader_id:a==null?void 0:a.id,media_type:s.type.split("/")[0],text_message:c,media:s};E.post("/messages/send-media",v,{onSuccess:l=>{n({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),m(!1),o(),clearTimeout(i),u.Notify.success("Mensagem enviada com sucesso!")},onError:l=>{o(),m(!1),clearTimeout(i),u.Notify.failure(l==null?void 0:l.media)},onFinish:()=>{n({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),o(),clearTimeout(i),m(!1)}})},S=p==null?void 0:p.map(t=>({...t,nameWithCpf:`${t.name} (${N(t.cpf,G)})`}));function _(t){n({...t})}return e.jsxs(D,{children:[e.jsx(T,{pageName:"Enviar Pelo Whatsapp"}),e.jsx(R,{variant:"fullWidth"}),e.jsxs("div",{className:"mt-5 h-full w-full bg-white p-8 shadow-6",children:[e.jsxs(O,{sx:{marginTop:3,width:500,display:"flex",justifyContent:"center",flexDirection:"column"},children:[e.jsx(b,{variant:"subtitle1",sx:{mb:2},children:"Selecione a Liderança*"}),e.jsxs(L,{required:!0,sx:{width:400},children:[e.jsx(F,{clearIcon:e.jsx(B,{onClick:j,children:e.jsx(h,{})}),value:a,onChange:(t,i)=>{_(i)},id:"leader",options:S,renderInput:t=>e.jsx(W,{...t}),getOptionLabel:t=>t.name?t.nameWithCpf:""}),e.jsx("p",{className:"mt-3 text-orange-600 text-xs font-semibold",children:"OBS: SELECIONE UMA LIDERANÇA PARA ENVIAR A MENSAGEM PARA TODOS OS ELEITORES CADASTRADO DESSA LIDERANÇA."})]})]}),a.name?e.jsx(P,{item:!0,xs:10,sm:8,md:6,sx:{marginTop:3,maxWidth:500,p:5,display:"flex",justifyContent:"center",flexDirection:"column",border:"2px solid #7f7f7f"},children:s?e.jsx(I,{file:s,removeFile:o,textMessage:c,setTextMessage:d,handleSubmit:A,leaderSelected:a,sendMessage:g}):e.jsx(M,{setFile:x})}):null]})]})}export{ce as default};
