import{i as A,j as e,r as a,y as C}from"./app-u7fozlWw.js";import{B as y}from"./Breadcrumb-0AVpDurv.js";import{r as _}from"./createSvgIcon-u-Q28SWm.js";import{D as O}from"./DefaultLayout-5xEGHTAf.js";import{m as D,n as l}from"./notiflix-aio-3.2.7.min-DExNRyof.js";import{HasFile as M}from"./HasFile-vKbqgD9x.js";import{FormMedia as T}from"./FormMedia-D7htGTwM.js";import{D as I}from"./Divider-Cdm0OXGN.js";import{B as N}from"./Box-CRu6fdKG.js";import{T as R}from"./Typography-DD6dSTNj.js";import{F as b,A as F,T as L}from"./Autocomplete-D-lhYf_H.js";import{I as W}from"./createSvgIcon-D7kmipxo.js";import{G as B}from"./Grid-9W3zZTvQ.js";import"./generateUtilityClasses-Ca4emq90.js";import"./Modal-DOAvuXTq.js";import"./Popper-Dj175c_g.js";import"./index-B1G-JV3p.js";import"./iconBase-CqJ7kUZa.js";import"./logo-candidato-SK3Uj6G_.js";import"./InputLabel-AHuEFgbO.js";import"./PrimaryButton-DM5fT6Z1.js";import"./Tooltip-rcou0Wg-.js";import"./CircularProgress-DcjuuhfH.js";import"./index-iSqDR5u1.js";var p={},P=A;Object.defineProperty(p,"__esModule",{value:!0});var x=p.default=void 0,q=P(_()),k=e;x=p.default=(0,q.default)((0,k.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");const G=["999.999.999-99"];function ce({leaders:i}){const[o,u]=a.useState({id:"",name:"",cpf:"",created_at:"",updated_at:"",nameWithCpf:""}),[c,n]=a.useState(""),[s,d]=a.useState(null),[g,r]=a.useState(!1),f=a.useCallback(()=>{d(null),n("")},[s]),h=()=>{u({}),n(""),f()},S=t=>{t.preventDefault(),r(!0),l.Notify.info("Aguarde um momento, sua mensagem está sendo enviada!");const m={leader_id:o==null?void 0:o.id,media_type:s.type.split("/")[0],text_message:c,media:s};C.post("/messages/send-media",m,{onSuccess:()=>{r(!1),l.Notify.success("Mensagem enviada com sucesso!"),console.log("Sucesso!")},onError:v=>{console.log(v),r(!1),l.Notify.failure("Ocorreu um erro ao enviar sua mensagem!"),console.log("Ocorreu um Erro!")},onFinish:()=>{r(!1),console.log("Promisse finalizada!")}})},E=i==null?void 0:i.map(t=>({...t,nameWithCpf:`${t.name} (${D(t.cpf,G)})`}));function j(t){u({...t})}return e.jsxs(O,{children:[e.jsx(y,{pageName:"Enviar Pelo Whatsapp"}),e.jsx(I,{variant:"fullWidth"}),e.jsxs(N,{sx:{marginTop:3,width:500,display:"flex",justifyContent:"center",flexDirection:"column"},children:[e.jsx(R,{variant:"subtitle1",sx:{mb:2},children:"Selecione a Liderança*"}),e.jsxs(b,{required:!0,sx:{width:400},children:[e.jsx(F,{clearIcon:e.jsx(W,{onClick:h,children:e.jsx(x,{})}),value:o,onChange:(t,m)=>{j(m)},id:"leader",options:E,renderInput:t=>e.jsx(L,{...t}),getOptionLabel:t=>t.name?t.nameWithCpf:""}),e.jsx("p",{className:"mt-3 text-orange-600 text-xs font-semibold",children:"OBS: SELECIONE UMA LIDERANÇA OU SE DESEJA ENVIAR A MENSAGEM PARA TODOS OS ELEITORES CADASTRADO NO SISTEMA ."})]})]}),o.name?e.jsx(B,{item:!0,xs:10,sm:8,md:6,sx:{marginTop:3,maxWidth:500,p:5,display:"flex",justifyContent:"center",flexDirection:"column",border:"2px solid #7f7f7f"},children:s?e.jsx(M,{file:s,removeFile:f,textMessage:c,setTextMessage:n,handleSubmit:S,leaderSelected:o,sendMessage:g}):e.jsx(T,{setFile:d})}):null]})}export{ce as default};
